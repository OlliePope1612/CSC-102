import random
import time

# Character chaos lines
quagmire_lines = ["Giggity! This bomb's got curves.", "I'd unplug that... wire.", "Giggity giggity goo!"]
joe_lines = ["MY WHEELCHAIR'S DEAD!", "HELP! PUSH ME CLOSER!", "PETER, YOU'RE OUR ONLY HOPE!"]
cleveland_lines = ["No no no no NO!", "Oh, that's not good...", "I'm getting outta here!"]

# Side effects of wrong moves
side_effects = [
    "A swarm of bees attacks Peter!",
    "Fireworks explode inside the bar!",
    "'Who Let the Dogs Out' blasts at full volume!",
    "The floor turns into quicksand!",
    "A chicken falls from the ceiling!"
]

# Updated wire color list
wires = ["orange", "yellow", "blue", "green", "purple"]

def sfx(text):
    print(f"*SFX: {text.upper()}*")

def run_game():
    print("\n--- FAMILY GUY: PETER GRIFFIN BOMB SQUAD ---\n")
    print("Peter Griffin has been hired to UNPLUG bombs around Quahog!")
    input("Press ENTER to continue...")

    print("\nPeter arrives at the Drunken Clam. There's a bomb with flashing lights!")
    print("The timer shows 5:00 minutes!")
    print("Quagmire, Joe, and Cleveland are panicking around him.\n")

    start_time = time.time()
    end_time = start_time + 300
    strikes = 0
    score = 0

    correct_wire = random.choice(wires)

    print("INSTRUCTIONS:")
    print("- UNPLUG the ORANGE wire. Unless it's jealous of PURPLE. Then UNPLUG the YELLOW wire.")
    print("- If the timer has a 7 in it, stop and do a chicken dance.\n")

    while time.time() < end_time and strikes < 3:
        print(random.choice(quagmire_lines))
        print(random.choice(joe_lines))
        print(random.choice(cleveland_lines))

        print("\nWires available to unplug:", ", ".join(wires))
        choice = input("Which wire will Peter unplug? ").strip().lower()

        if random.randint(1, 5) == 1:
            print("THE TIMER HAS A 7! Peter stops to do a chicken dance. (He wastes 10 seconds.)")
            sfx("awkward chicken dance music")
            time.sleep(2)
            end_time -= 10
            score -= 5

        if choice == correct_wire:
            print("\nPeter panics... but somehow UNPLUGS THE RIGHT WIRE!")
            sfx("power down")
            print("The bomb powers down. The Drunken Clam is saved!")
            score += 100 + int(end_time - time.time())
            break
        elif choice not in wires:
            print("Peter stares at the wire confused. That's not even a real color!")
            score -= 10
            continue
        else:
            print("\nPeter unplugged the WRONG wire!")
            print(random.choice(side_effects))
            sfx("beep beep beep")
            strikes += 1
            score -= 20
            end_time -= 15
            print(f"‚ö†Ô∏è  STRIKES: {strikes}/3\n")

    else:
        print("\nüí• The bomb explodes in cartoon fashion, launching Peter through a wall!")
        print("Everyone is fine. Somehow.")
        sfx("EXPLOSION")
        score = max(score, 0)

    print("\nAt the last second, Stewie and Brian arrive.")
    print("Stewie: 'Honestly, if humanity's fate rested in his hands, we deserved extinction anyway.'")

    print(f"\nüèÜ FINAL SCORE: {score}")
    if strikes >= 3:
        print("‚ùå You hit 3 strikes. Peter should never be trusted with electronics.")

    print("Peter trips over another bomb. THE CYCLE BEGINS AGAIN.")
    print("\n--- THE END ---\n")

    again = input("Play again? (yes/no): ").strip().lower()
    if again.startswith("y"):
        run_game()

run_game()
